<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sun Mar 16 14:50:17 MST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>PathFollower (snackbot 1.0-SNAPSHOT API)</title>
<meta name="date" content="2014-03-16">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PathFollower (snackbot 1.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PathFollower.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/ensor/robots/pathfollower/Module.html" title="class in org.ensor.robots.pathfollower"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/ensor/robots/pathfollower/PathFollower.html" target="_top">Frames</a></li>
<li><a href="PathFollower.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_org.ensor.threads.biote.Biote">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.ensor.robots.pathfollower</div>
<h2 title="Class PathFollower" class="title">Class PathFollower</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/ensor/threads/biote/Biote.html" title="class in org.ensor.threads.biote">org.ensor.threads.biote.Biote</a></li>
<li>
<ul class="inheritance">
<li>org.ensor.robots.pathfollower.PathFollower</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">PathFollower</span>
extends <a href="../../../../org/ensor/threads/biote/Biote.html" title="class in org.ensor.threads.biote">Biote</a></pre>
<div class="block">This Biote allows a path to be planned and followed.  It requires a mover
 Biote to send movement updates to and it also subscribes to navigation
 path planning events sent from a navigation Biote.  The navigation path
 planner sends a start and a goal location as well as a list of waypoints
 to follow.  This Biote builds a cubic spline path between them and begins
 to issue movement commands to the motors to make the movement happen.
 Periodically it also receives events from the position estimation system
 so that the position and direction can be re-updated to match the latest
 estimates.  When the path has been finished, a path completion event is
 raised back to the Biote who requested the path to be followed.

 The objective of following the path smoothly
 is to begin at our initial velocity v0 and accelerate
 at acceleration parameter 'a' up to final cruising speed 'vc'
 and hold that speed until it is time to decelerate down to the final
 velocity v1.
 <pre>
          vc
    /-----------------\
   /                   \
  /                     \
 / v0                    \ v1

 </pre>

 Planning for this begins as follows:
 <ul>
 <li>Calculate the cubic spline between the waypoints and from that, the
     overall path length.
 <li>Calculate the time we spend accelerating and decelerating.
 <li>Calculate the distance we spend accelerating and decelerating.
 <li>Obtain the total path length and subtract the distance of acceleration
     to obtain the distance we spend at cruise speed.
 <li>Divide by cruise velocity to find the cruise time.
 <li>Add up all of the times to determine the total time to traverse the
     path.
 <li>Create a piecewise linear function mapping time 't' into distance
     traveled: d = f(t).
 <li>Create a piecewise linear function mapping time 't' into the
     velocity we should be at right now.
 <li>Divide this piecewise function by the total distance to travel to obtain
     a piecewise function mapping time (t) into the path interval [0-1].
 <li>During the 'tick' function, we can now simply evaluate the time elapsed
     to obtain an estimate of where we 'should' be.
 <li>We then plot a course based on where we 'should' be for the next tick
     and where we are now.
 </ul></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>jona</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/ensor/robots/pathfollower/PathFollower.html#PathFollower(org.ensor.threads.biote.BioteManager, int)">PathFollower</a></strong>(<a href="../../../../org/ensor/threads/biote/BioteManager.html" title="class in org.ensor.threads.biote">BioteManager</a>&nbsp;aBioteManager,
            int&nbsp;aMover)</code>
<div class="block">This is a path following Biote which is responsible
 for receiving a planned path and executing it by sending events
 to the object responsible for executing the
 position and direction movement.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.ensor.threads.biote.Biote">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.ensor.threads.biote.<a href="../../../../org/ensor/threads/biote/Biote.html" title="class in org.ensor.threads.biote">Biote</a></h3>
<code><a href="../../../../org/ensor/threads/biote/Biote.html#__protected_friend_BioteManager__enqueueStimulus(org.ensor.threads.biote.BioteManager, org.ensor.threads.biote.Event)">__protected_friend_BioteManager__enqueueStimulus</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#__protected_friend_BioteThread__processEvents()">__protected_friend_BioteThread__processEvents</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#cancelTimer(int)">cancelTimer</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#getBioteId()">getBioteId</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#getBioteManager()">getBioteManager</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#getTargetBioteId(java.lang.String)">getTargetBioteId</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#log(boolean, java.lang.String)">log</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#log(boolean, java.lang.String, org.ensor.data.atom.Atom)">log</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#sendStimulus(int, org.ensor.threads.biote.Event)">sendStimulus</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#setMessageRoute(java.lang.String, java.lang.Integer)">setMessageRoute</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#shutdown(boolean)">shutdown</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#startTimer(int, org.ensor.threads.biote.Event, boolean)">startTimer</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#stimulate(org.ensor.threads.biote.Event)">stimulate</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#subscribe(java.lang.String, org.ensor.threads.biote.IEventHandler)">subscribe</a>, <a href="../../../../org/ensor/threads/biote/Biote.html#unsubscribeHandlers(java.lang.String)">unsubscribeHandlers</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PathFollower(org.ensor.threads.biote.BioteManager, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PathFollower</h4>
<pre>public&nbsp;PathFollower(<a href="../../../../org/ensor/threads/biote/BioteManager.html" title="class in org.ensor.threads.biote">BioteManager</a>&nbsp;aBioteManager,
            int&nbsp;aMover)</pre>
<div class="block">This is a path following Biote which is responsible
 for receiving a planned path and executing it by sending events
 to the object responsible for executing the
 position and direction movement.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aBioteManager</code> - Biote manager.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PathFollower.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/ensor/robots/pathfollower/Module.html" title="class in org.ensor.robots.pathfollower"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/ensor/robots/pathfollower/PathFollower.html" target="_top">Frames</a></li>
<li><a href="PathFollower.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_org.ensor.threads.biote.Biote">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014. All rights reserved.</small></p>
</body>
</html>
